function toggleMenu(){const menu=document.getElementById('navMenu');const toggleButton=document.querySelector('.menu-toggle');menu.classList.toggle('active');const isExpanded=menu.classList.contains('active');toggleButton.setAttribute('aria-expanded',isExpanded)}
function scrollToSection(sectionId){const section=document.getElementById(sectionId);if(!section)return;const headerHeight=70;const sectionPosition=section.offsetTop-headerHeight;window.scrollTo({top:sectionPosition,behavior:'smooth'});const menu=document.getElementById('navMenu');menu.classList.remove('active')}
function handleSubmit(event){event.preventDefault();const form=document.getElementById('volunteerForm');const nome=form.nome.value.trim();const email=form.email.value.trim();if(!nome||!email){alert('Por favor, preencha os campos Nome e Email.');return}
const atividadesSelecionadas=[];const selectAtividades=form.atividades;for(let i=0;i<selectAtividades.options.length;i++){if(selectAtividades.options[i].selected){atividadesSelecionadas.push(selectAtividades.options[i].text)}}
const formData={nome:nome,email:email,telefone:form.telefone.value.trim(),idade:form.idade.value.trim(),disponibilidade:form.disponibilidade.value.trim(),areaInteresse:atividadesSelecionadas.join(', '),experiencia:form.experiencia.value.trim(),motivacao:form.motivacao.value.trim(),dataCadastro:new Date().toLocaleString()};let voluntarios=JSON.parse(localStorage.getItem('voluntarios'))||[];voluntarios.push(formData);localStorage.setItem('voluntarios',JSON.stringify(voluntarios));const successMessage=document.getElementById('successMessage');if(successMessage){successMessage.classList.add('show');successMessage.scrollIntoView({behavior:'smooth',block:'center'});setTimeout(()=>form.reset(),2000);setTimeout(()=>successMessage.classList.remove('show'),5000)}else{form.reset()}
exibirVoluntarios()}
function exibirVoluntarios(){const voluntarios=JSON.parse(localStorage.getItem('voluntarios')||'[]');const tabelaContainer=document.getElementById('tabelaVoluntarios');if(!tabelaContainer)return;if(voluntarios.length===0){tabelaContainer.innerHTML='<p>Nenhum voluntário cadastrado ainda.</p>';return}
let html='<table border="1" cellpadding="5" cellspacing="0">';html+='<tr><th>Nome</th><th>Email</th><th>Telefone</th><th>Idade</th><th>Disponibilidade</th><th>Área de Interesse</th><th>Data Cadastro</th></tr>';voluntarios.forEach(v=>{html+=`<tr>
            <td>${v.nome}</td>
            <td>${v.email}</td>
            <td>${v.telefone}</td>
            <td>${v.idade}</td>
            <td>${v.disponibilidade}</td>
            <td>${v.areaInteresse}</td>
            <td>${v.dataCadastro}</td>
        </tr>`});html+='</table>';tabelaContainer.innerHTML=html}
window.addEventListener('scroll',()=>{const cards=document.querySelectorAll('.card, .project-card');cards.forEach(card=>{const cardTop=card.getBoundingClientRect().top;const windowHeight=window.innerHeight;if(cardTop<windowHeight-100){card.style.opacity='1';card.style.transform='translateY(0)'}})});function aplicarMascaraTelefone(){const telefoneInput=document.getElementById('telefone');if(telefoneInput){telefoneInput.addEventListener('input',function(e){let value=e.target.value.replace(/\D/g,'');if(value.length>11)value=value.slice(0,11);if(value.length>6){value=`(${value.slice(0, 2)}) ${value.slice(2, 7)}-${value.slice(7)}`}else if(value.length>2){value=`(${value.slice(0, 2)}) ${value.slice(2)}`}else if(value.length>0){value=`(${value}`}
e.target.value=value})}}
function loadPage(url){const mainContent=document.querySelector('main');fetch(url).then(response=>response.text()).then(html=>{const parser=new DOMParser();const doc=parser.parseFromString(html,'text/html');const newMain=doc.querySelector('main');if(newMain){mainContent.innerHTML=newMain.innerHTML;document.title=doc.querySelector('title').textContent;initListeners();setActiveLink()}else{console.error("Erro SPA: Tag <main> não encontrada na página carregada:",url)}}).catch(error=>{console.error('Erro ao carregar a página:',error);window.location.href=url})}
function initListeners(){const formCadastro=document.getElementById('volunteerForm');if(formCadastro){formCadastro.addEventListener('submit',handleSubmit)}
aplicarMascaraTelefone();exibirVoluntarios()}
document.addEventListener('click',(event)=>{const link=event.target.closest('a');if(link&&link.href.includes(window.location.host)&&link.href.endsWith('.html')){event.preventDefault();const targetUrl=link.href;history.pushState(null,'',targetUrl);loadPage(targetUrl);const navMenu=document.getElementById('navMenu');if(navMenu){navMenu.classList.remove('active')}}});document.addEventListener('DOMContentLoaded',()=>{const cards=document.querySelectorAll('.card, .project-card');cards.forEach(card=>{card.style.opacity='0';card.style.transform='translateY(30px)';card.style.transition='opacity 0.6s ease, transform 0.6s ease';initListeners();setActiveLink()});aplicarMascaraTelefone();exibirVoluntarios()})